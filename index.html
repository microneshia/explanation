<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>総合解説プラットフォーム - 解答への道しるべ</title>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
        /* 基本リセットとボックスサイジングモデルの指定 */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            line-height: 1.7;
            background-color: #f8f9fa;
            color: #212529;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* ヘッダー (サイト上部のタイトル部分) のスタイル */
        header {
            background-color: #007bff;
            color: white;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        /* ヘッダー内のh1要素 (サイトのメインタイトル) のスタイル */
        header h1 {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 600;
        }

        /* ヘッダー内のh1要素内のspan要素でclass="subtitle"を持つもの (サブタイトル) のスタイル */
        header h1 .subtitle {
            display: block;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            font-weight: 300;
            margin-top: 5px;
            opacity: 0.9;
        }

        /* ナビゲーションバーのスタイル */
        nav {
            background-color: #343a40;
            padding: 10px 0;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* ナビゲーション内のul要素 (リンクのリスト) のスタイル */
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* ナビゲーション内のli要素 (各リンク項目) のスタイル */
        nav ul li {
            margin: 5px 10px;
        }

        /* ナビゲーション内のa要素 (リンク) のスタイル - 意図しない色の変化を完全に防ぐ */
        nav a {
            color: #f8f9fa;
            text-decoration: none;
            padding: 8px 12px;
            background-color: transparent;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        /* メインコンテンツエリアを囲むコンテナのスタイル */
        .main-container {
            flex: 1;
            width: 95%;
            max-width: 1100px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
        }

        /* コンテンツカードを並べるためのグリッドコンテナのスタイル */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* 個々の記事や情報を表示するカードのスタイル */
        .content-card {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        /* コンテンツカードのマウスオーバー時のスタイル */
        .content-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        /* コンテンツカード内のh3 (記事タイトルなど) のスタイル */
        .content-card h3 {
            color: #0056b3;
            font-size: clamp(1.2rem, 3vw, 1.4rem);
            border-bottom: 1px solid #007bff;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        /* コンテンツカード内のp (記事の概要など) のスタイル */
        .content-card p {
            font-size: clamp(0.9rem, 2.2vw, 1rem);
            margin-bottom: 15px;
            color: #495057;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            /* 互換性のための標準プロパティ */
            line-clamp: 3;
        }

        /* コンテンツカード内の「詳しく読む」などのリンクのスタイル */
        .content-card a.learn-more {
            display: inline-block;
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 0;
            margin-top: auto;
            align-self: flex-start;
            border-bottom: 2px solid transparent;
            transition: border-bottom-color 0.3s ease;
        }

        /* 「詳しく読む」リンクのマウスオーバー時のスタイル */
        .content-card a.learn-more:hover {
            border-bottom-color: #007bff;
        }

        /* セクションタイトル (例:「解説記事一覧」) の共通スタイル */
        section h2.section-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: clamp(1.5rem, 3.5vw, 1.8rem);
            color: #343a40;
            position: relative;
            padding-bottom: 10px;
        }

        /* セクションタイトルの疑似要素 (:after) を使った装飾下線 */
        section h2.section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background-color: #007bff;
            margin: 8px auto 0;
        }

        /* 「このサイトについて」セクション内の段落のスタイル */
        #about p {
            text-align: center;
            max-width: 750px;
            margin-left: auto;
            margin-right: auto;
            font-size: clamp(0.95rem, 2.3vw, 1.05rem);
        }

        /* フッター (ページ最下部) のスタイル */
        footer {
            background-color: #343a40;
            color: #adb5bd;
            text-align: center;
            padding: 25px 15px;
            margin-top: auto;
        }

        /* フッター内の段落のスタイル */
        footer p {
            font-size: clamp(0.8rem, 2vw, 0.9rem);
        }

        /* MathJaxで表示される数式が横にはみ出す場合のスタイル調整 */
        mjx-container[jax="CHTML"][display="true"] {
            display: block;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 5px 0;
        }

        /* メディアクエリ: 画面幅が768px以下の場合 (主にスマートフォン) に適用されるスタイル */
        @media (max-width: 768px) {

            /* メインコンテナの調整 */
            .main-container {
                width: 100%;
                margin: 10px auto;
                border-radius: 0;
                padding: 15px;
            }

            /* ヘッダータイトルの調整 */
            header h1 {
                font-size: 1.6rem;
            }

            /* ナビゲーションリストの調整 */
            nav ul {
                justify-content: space-around;
            }

            /* ナビゲーションリストアイテムの調整 */
            nav ul li {
                margin: 5px;
            }

            /* コンテンツグリッドの調整 */
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <header id="main-header">
        <h1>
            総合解説プラットフォーム
            <span class="subtitle">あらゆる疑問に、明快な解答を。</span>
        </h1>
    </header>

    <nav>
        <ul>
            <li><a href="#">トップ</a></li>
            <li><a href="contents.html">コンテンツ</a></li>
            <li><a href="#about">このサイトについて</a></li>
        </ul>
    </nav>

    <div class="main-container">
        <section id="articles-list">
            <h2 class="section-title">解説記事一覧</h2>
            <div class="content-grid">
                <!-- 記事カードはJavaScriptによってここに動的に生成されます -->
                <p id="loading-message">記事を読み込み中...</p>
            </div>
        </section>

        <section id="about" style="margin-top: 40px;">
            <h2 class="section-title">このサイトについて</h2>
            <p>
                「総合解説プラットフォーム」は、学習者、研究者、そして知的好奇心を持つすべての人々に向けて、
                幅広い分野のトピックに関する質の高い解説を提供することを目的としています。
                複雑な概念も、基本から丁寧に解きほぐし、理解への最短経路を示します。
                皆様の学習の一助となれば幸いです。
            </p>
        </section>
    </div>

    <footer>
        <p>© 2025 総合解説プラットフォーム. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // --- ヘッダーをクリックでトップページへ遷移 ---
            const mainHeader = document.getElementById('main-header');
            if (mainHeader) {
                mainHeader.addEventListener('click', (event) => {
                    // ヘッダー内のリンクがクリックされた場合は、そちらを優先する
                    if (event.target.closest('a')) {
                        return;
                    }
                    window.location.href = 'index.html'; // トップページへ遷移
                });
            }
            const contentGrid = document.querySelector('.content-grid');
            const loadingMessage = document.getElementById('loading-message');

            // 読み込む記事のファイル名をリストアップします
            // explanationフォルダ内のファイル名に合わせて、この配列を更新してください
            const articleFileNames = [ // 変数名を articleFileNames に変更
            'Applied_Mathematics_1_09.html',  // 9
            'analogEC_e1.html',  // 8
            'Applied_Mathematics_1_08.html',  // 7
            'EMsystemII_07.html',  // 6
            'Applied_Mathematics_1_07.html',  // 5
            'Control_Engineering_1_06.html',  // 4
            'Electromagnetic_Theory_06.html',  // 3
            'Applied_Mathematics_1_06.html',  // 2
            'scalar_potential_explanation.html'  // 1
            ];

            /**
             * 新しい記事を追加する方法:
             * 
             * 1. 「テンプレート.html」ファイルをコピーして、新しいHTMLファイルを作成します。
             *    例: 「explanation/新記事のファイル名.html」
             * 
             * 2. 新しく作成したHTMLファイルを開き、以下の内容を更新します:
             *    - `<title>` タグ: 記事のタイトルを設定します。
             *    - `<meta name="article-number" content="00000X">` タグ:
             *      現在の記事の中で最も大きな連番（例: 000006）より大きい、
             *      新しい6桁の連番を設定します（例: 000007）。
             *      この連番の数値が高いほど、記事一覧で上位に表示されます。
             *    - `<h1>` タグ: 記事のメインタイトルを設定します。
             *    - 最初の `<p>` タグ: 記事の簡単な概要（ディスクリプション）を設定します。
             *      この内容は、index.htmlのカードに表示されます。
             *    - その他のセクション: 記事の本文を記述します。
             * 
             * 3. この `index.html` ファイルの `articleFileNames` 配列に、
             *    新しく追加した記事のファイル名（例: `'新記事のファイル名.html'`）を追加します。
             * 
             * これらの手順を完了すると、ページをリロードした際に新しい記事が記事一覧に自動的に表示されます。
             */

            // 各記事のデータを取得する非同期関数
            // pathではなくfileNameを受け取るように変更し、フォルダ名を結合
            async function fetchArticleData(fileName, folder = 'explanation') {
                const path = `${folder}/${fileName}`; // フォルダ名を結合してパスを作成
                try {
                    const response = await fetch(path);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status} for ${path}`);
                    }
                    const text = await response.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(text, 'text/html');

                    // 記事のタイトル（.article-container h1タグから取得）
                    const titleElement = doc.querySelector('.article-container h1');
                    const title = titleElement ? titleElement.textContent.trim() : 'タイトルなし';

                    // 記事の概要（.article-container内の最初の<p>タグから取得）
                    const descriptionElement = doc.querySelector('.article-container p');
                    // MathJaxの数式部分はMathJaxによって後で変換されるため、ここではHTMLとして取得
                    const description = descriptionElement ? descriptionElement.innerHTML : '概要なし';

                    // 記事の連番（<meta name="article-number">から取得）
                    const articleNumberMeta = doc.querySelector('meta[name="article-number"]');
                    // 連番を数値に変換。取得できない場合は0をデフォルト値とする。
                    const articleNumber = articleNumberMeta ? parseInt(articleNumberMeta.content, 10) : 0;

                    return { title, description, path, articleNumber };
                } catch (error) {
                    console.error(`記事の読み込み中にエラーが発生しました (${path}):`, error);
                    return null; // エラーが発生した場合はnullを返す
                }
            }

            // 全ての記事データを並行して取得
            // mapの引数を articleFileNames に変更し、fetchArticleDataにファイル名とフォルダ名を渡す
            const articlePromises = articleFileNames.map(fileName => fetchArticleData(fileName, 'explanation'));
            const articles = (await Promise.all(articlePromises)).filter(article => article !== null); // nullを除外

            // 連番の降順にソート (数値の高いものが先頭に来るように)
            articles.sort((a, b) => b.articleNumber - a.articleNumber);

            // 読み込みメッセージを削除
            if (loadingMessage) {
                loadingMessage.remove();
            }

            // 取得したデータに基づいてカードを生成し、グリッドに追加
            articles.forEach(article => {
                const card = document.createElement('div');
                card.classList.add('content-card');

                // MathJaxの数式を含む可能性があるので、innerHTMLを使用
                card.innerHTML = `
                    <h3>${article.title}</h3>
                    <p>${article.description}</p>
                    <a href="${article.path}" class="learn-more">詳しく読む →</a>
                `;

                // カード全体をクリック可能にするイベントリスナー
                card.addEventListener('click', (event) => {
                    // 「詳しく読む」リンク自体がクリックされた場合は、デフォルトのリンク動作を優先
                    if (event.target.closest('.learn-more')) {
                        return;
                    }
                    // カードの他の部分がクリックされた場合は、リンク先に遷移
                    window.location.href = article.path;
                });

                contentGrid.appendChild(card);
            });

            // MathJaxが動的に追加されたコンテンツを認識して数式をレンダリングするように指示
            // MathJax v3はMutationObserverを使用するため、通常は自動的にレンダリングされますが、
            // 明示的に再レンダリングをトリガーすることも可能です。
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });
    </script>

</body>

</html>
